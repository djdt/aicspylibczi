

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aicspylibczi package &mdash; aicspylibczi 2.5.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributing" href="contributing.html" />
    <link rel="prev" title="aicspylibczi" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> aicspylibczi
          

          
          </a>

          
            
            
              <div class="version">
                2.5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#stable-release">Stable release</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#from-sources">From sources</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Package modules</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">aicspylibczi package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-aicspylibczi.CziFile">aicspylibczi.CziFile module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-aicspylibczi.types">aicspylibczi.types module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-aicspylibczi">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#deploying">Deploying</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">aicspylibczi</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">aicspylibczi</a> &raquo;</li>
        
      <li>aicspylibczi package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/aicspylibczi.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="contributing.html" class="btn btn-neutral float-right" title="Contributing" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modules.html" class="btn btn-neutral float-left" title="aicspylibczi" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="aicspylibczi-package">
<h1>aicspylibczi package<a class="headerlink" href="#aicspylibczi-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-aicspylibczi.CziFile">
<span id="aicspylibczi-czifile-module"></span><h2>aicspylibczi.CziFile module<a class="headerlink" href="#module-aicspylibczi.CziFile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aicspylibczi.CziFile.CziFile">
<em class="property">class </em><code class="sig-prename descclassname">aicspylibczi.CziFile.</code><code class="sig-name descname">CziFile</code><span class="sig-paren">(</span><em class="sig-param">czi_filename: Union[str, pathlib.Path, bytes, BinaryIO, io.BufferedIOBase, _io.BufferedReader], metafile_out: Union[str, pathlib.Path] = '', verbose: bool = False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.CziFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Zeiss CZI file object.</p>
<dl>
<dt>Args:</dt><dd><div class="line-block">
<div class="line">czi_filename (str): Filename of czifile to access.</div>
</div>
</dd>
<dt>Kwargs:</dt><dd><div class="line-block">
<div class="line">metafile_out (str): Filename of xml file to optionally export czi meta data to.</div>
<div class="line">use_pylibczi (bool): Set to false to use Christoph Gohlke’s czifile reader instead of libCZI.</div>
<div class="line">verbose (bool): Print information and times during czi file access.</div>
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Utilizes compiled wrapper to libCZI for accessing the CZI file.</p>
</div>
<dl class="attribute">
<dt id="aicspylibczi.CziFile.CziFile.ZISRAW_DIMS">
<code class="sig-name descname">ZISRAW_DIMS</code><em class="property"> = {'B', 'C', 'H', 'I', 'R', 'S', 'T', 'V', 'Z'}</em><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.ZISRAW_DIMS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.convert_to_buffer">
<em class="property">static </em><code class="sig-name descname">convert_to_buffer</code><span class="sig-paren">(</span><em class="sig-param">file: Union[str, pathlib.Path, bytes, BinaryIO, io.BufferedIOBase, _io.BufferedReader]</em><span class="sig-paren">)</span> &#x2192; Union[BinaryIO, numpy.ndarray]<a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.convert_to_buffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.convert_to_buffer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.dims">
<em class="property">property </em><code class="sig-name descname">dims</code><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.dims" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the dimensions present the binary data (not the metadata)
Y and X are included for completeness but can not be used as constraints.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string containing Dimensions letters present, ie “BSTZYX”</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.dims_shape">
<code class="sig-name descname">dims_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.dims_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.dims_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the dimensions for the opened file from the binary data (not the metadata)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>A list of dictionaries containing Dimension / depth. If the shape is consistent across Scenes then
the list will have only one Dictionary. If the shape is inconsistent the the list will have a dictionary</p>
<blockquote>
<div><p>for each Scene. A consistently shaped file with 3 scenes, 7 time-points</p>
</div></blockquote>
<p>and 4 Z slices containing images of (h,w) = (325, 475) would return
[</p>
<blockquote>
<div><p>{‘S’: (0, 3), ‘T’: (0,7), ‘X’: (0, 475), ‘Y’: (0, 325), ‘Z’: (0, 4)}</p>
</div></blockquote>
<p>].
The result for a similarly shaped file but with different number of time-points per scene would yield
[</p>
<blockquote>
<div><p>{‘S’: (0, 1), ‘T’: (0,8), ‘X’: (0, 475), ‘Y’: (0, 325), ‘Z’: (0, 4)},
{‘S’: (1, 2), ‘T’: (0,6), ‘X’: (0, 475), ‘Y’: (0, 325), ‘Z’: (0, 4)},
{‘S’: (2, 3), ‘T’: (0,7), ‘X’: (0, 475), ‘Y’: (0, 325), ‘Z’: (0, 4)}</p>
</div></blockquote>
<p>]</p>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.is_mosaic">
<code class="sig-name descname">is_mosaic</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.is_mosaic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.is_mosaic" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if the loaded file is a mosaic file</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True | False ie is this a mosaic file</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.meta">
<em class="property">property </em><code class="sig-name descname">meta</code><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract all metadata from czifile.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>metadata as an xml etree</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>lxml.etree</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.read_image">
<code class="sig-name descname">read_image</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.read_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.read_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the subblocks in the CZI file and for any subblocks that match all the constraints in kwargs return
that data. This allows you to select channels/scenes/time-points/Z-slices etc. Note if passed a BGR image
then the dims of the object will returned by this function and the implicit BGR channel will be expanded
into 3 channels. This shape differ from the values of dims(), size(), and dims_shape() as these are returning
the native shape without changing from BGR_3X to Gray_X.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – The keywords below allow you to specify the dimensions that you wish to match. If you
under-specify the constraints you can easily end up with a massive image stack.</p>
<blockquote>
<div><p>Z = 1   # The Z-dimension.
C = 2   # The C-dimension (“channel”).
T = 3   # The T-dimension (“time”).
R = 4   # The R-dimension (“rotation”).
S = 5   # The S-dimension (“scene”).
I = 6   # The I-dimension (“illumination”).
H = 7   # The H-dimension (“phase”).
V = 8   # The V-dimension (“view”).
M = 10  # The M_index, this is only valid for Mosaic files!</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tuple of (numpy.ndarray, a list of (Dimension, size)) the second element of the tuple is to make
sure the numpy.ndarray is interpretable. An example of the list is
[(‘S’, 1), (‘T’, 1), (‘C’, 2), (‘Z’, 25), (‘Y’, 1024), (‘X’, 1024)]
so if you probed the numpy.ndarray with .shape you would get (1, 1, 2, 25, 1024, 1024).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(numpy.ndarray, [Dimension, Size])</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.read_mosaic">
<code class="sig-name descname">read_mosaic</code><span class="sig-paren">(</span><em class="sig-param">region: Tuple = None</em>, <em class="sig-param">scale_factor: float = 1.0</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.read_mosaic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.read_mosaic" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a mosaic file and returns an image corresponding to the specified dimensions. If the file is more than
a 2D sheet of pixels, meaning only one channel, z-slice, time-index, etc then the kwargs must specify the
dimension with more than one possible value.</p>
<p><strong>Example:</strong> Read in the C=1 channel of a mosaic file at 1/10th the size</p>
<blockquote>
<div><p>czi = CziFile(filename)
img = czi.read_mosaic(scale_factor=0.1, C=1)</p>
</div></blockquote>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>region</strong> – A rectangle specifying the extraction box (x, y, width, height) specified in pixels</p></li>
<li><p><strong>scale_factor</strong> – The amount to scale the data by, 0.1 would mean an image 1/10 the height and width of native, if you
get distortions it seems to be due to a bug in Zeiss’s libCZI I’m trying to track it down but for now
if you use scale_factor=1.0 it should work properly.</p></li>
<li><p><strong>kwargs</strong> – The keywords below allow you to specify the dimension plane that constrains the 2D data. If the
constraints are underspecified the function will fail.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Z</span> <span class="o">=</span> <span class="mi">1</span>   <span class="c1"># The Z-dimension.</span>
<span class="n">C</span> <span class="o">=</span> <span class="mi">2</span>   <span class="c1"># The C-dimension (&quot;channel&quot;).</span>
<span class="n">T</span> <span class="o">=</span> <span class="mi">3</span>   <span class="c1"># The T-dimension (&quot;time&quot;).</span>
<span class="n">R</span> <span class="o">=</span> <span class="mi">4</span>   <span class="c1"># The R-dimension (&quot;rotation&quot;).</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">5</span>   <span class="c1"># The S-dimension (&quot;scene&quot;).</span>
<span class="n">I</span> <span class="o">=</span> <span class="mi">6</span>   <span class="c1"># The I-dimension (&quot;illumination&quot;).</span>
<span class="n">H</span> <span class="o">=</span> <span class="mi">7</span>   <span class="c1"># The H-dimension (&quot;phase&quot;).</span>
<span class="n">V</span> <span class="o">=</span> <span class="mi">8</span>   <span class="c1"># The V-dimension (&quot;view&quot;).</span>
</pre></div>
</div>
</li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(1, height, width)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.read_mosaic_size">
<code class="sig-name descname">read_mosaic_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.read_mosaic_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.read_mosaic_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the size of the entire mosaic image, if it’s not a mosaic image return (0, 0, -1, -1)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(x, y, w, h) the bounding box of the mosaic image</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(int, int, int, int)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.read_subblock_metadata">
<code class="sig-name descname">read_subblock_metadata</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.read_subblock_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.read_subblock_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the subblock specific metadata, ie time subblock was acquired / position at acquisition time etc.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – The keywords below allow you to specify the dimensions that you wish to match. If you
under-specify the constraints you can easily end up with a massive image stack.</p>
<blockquote>
<div><p>Z = 1   # The Z-dimension.
C = 2   # The C-dimension (“channel”).
T = 3   # The T-dimension (“time”).
R = 4   # The R-dimension (“rotation”).
S = 5   # The S-dimension (“scene”).
I = 6   # The I-dimension (“illumination”).
H = 7   # The H-dimension (“phase”).
V = 8   # The V-dimension (“view”).
M = 10  # The M_index, this is only valid for Mosaic files!</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an array of stings containing the specified subblock metadata</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.scene_bounding_box">
<code class="sig-name descname">scene_bounding_box</code><span class="sig-paren">(</span><em class="sig-param">index: int = -1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.scene_bounding_box"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.scene_bounding_box" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the bounding box of the raw collected data (pyramid 0) from the czifile. if not specified it defaults to
the first scene</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index</strong> – the scene index, omit and it defaults to the first one</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(x0, y0, w, h) for the specified scene</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.scene_height_by_width">
<code class="sig-name descname">scene_height_by_width</code><span class="sig-paren">(</span><em class="sig-param">index: int = -1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.scene_height_by_width"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.scene_height_by_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the size of the scene (Y, X) / (height, width) for the specified Scene. The default is to return
the size of the first Scene but Zeiss allows scenes to be different sizes thought it is unlikely to encounter.
This module will warn you on instantiation if the scenes have inconsistent width and height.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index</strong> – specifies the index of the Scene to get the height and width of</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(height, width) tuple of the Specified scene.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.shape_is_consistent">
<em class="property">property </em><code class="sig-name descname">shape_is_consistent</code><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.shape_is_consistent" title="Permalink to this definition">¶</a></dt>
<dd><p>Query if the file shape is consistent across scenes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>true if consistent, false the scenes have different dimension shapes</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.CziFile.size">
<em class="property">property </em><code class="sig-name descname">size</code><a class="headerlink" href="#aicspylibczi.CziFile.CziFile.size" title="Permalink to this definition">¶</a></dt>
<dd><p>This returns the Size of each dimension in the dims string. So if S had valid indexes of [0, 1, 2, 3, 4]
the returned tuple would have a value of 5 in the same position as the S occurs in the dims string.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a tuple of dimension sizes. If the data has inconsistent shape the list will only contain -1 values and
the user needs to use dims_shape() to get the indexes.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-aicspylibczi.types">
<span id="aicspylibczi-types-module"></span><h2>aicspylibczi.types module<a class="headerlink" href="#module-aicspylibczi.types" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-aicspylibczi">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-aicspylibczi" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aicspylibczi.CziFile">
<em class="property">class </em><code class="sig-prename descclassname">aicspylibczi.</code><code class="sig-name descname">CziFile</code><span class="sig-paren">(</span><em class="sig-param">czi_filename: Union[str, pathlib.Path, bytes, BinaryIO, io.BufferedIOBase, _io.BufferedReader], metafile_out: Union[str, pathlib.Path] = '', verbose: bool = False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Zeiss CZI file object.</p>
<dl>
<dt>Args:</dt><dd><div class="line-block">
<div class="line">czi_filename (str): Filename of czifile to access.</div>
</div>
</dd>
<dt>Kwargs:</dt><dd><div class="line-block">
<div class="line">metafile_out (str): Filename of xml file to optionally export czi meta data to.</div>
<div class="line">use_pylibczi (bool): Set to false to use Christoph Gohlke’s czifile reader instead of libCZI.</div>
<div class="line">verbose (bool): Print information and times during czi file access.</div>
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Utilizes compiled wrapper to libCZI for accessing the CZI file.</p>
</div>
<dl class="attribute">
<dt id="aicspylibczi.CziFile.ZISRAW_DIMS">
<code class="sig-name descname">ZISRAW_DIMS</code><em class="property"> = {'B', 'C', 'H', 'I', 'R', 'S', 'T', 'V', 'Z'}</em><a class="headerlink" href="#aicspylibczi.CziFile.ZISRAW_DIMS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.convert_to_buffer">
<em class="property">static </em><code class="sig-name descname">convert_to_buffer</code><span class="sig-paren">(</span><em class="sig-param">file: Union[str, pathlib.Path, bytes, BinaryIO, io.BufferedIOBase, _io.BufferedReader]</em><span class="sig-paren">)</span> &#x2192; Union[BinaryIO, numpy.ndarray]<a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.convert_to_buffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.convert_to_buffer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.dims">
<em class="property">property </em><code class="sig-name descname">dims</code><a class="headerlink" href="#aicspylibczi.CziFile.dims" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the dimensions present the binary data (not the metadata)
Y and X are included for completeness but can not be used as constraints.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string containing Dimensions letters present, ie “BSTZYX”</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.dims_shape">
<code class="sig-name descname">dims_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.dims_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.dims_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the dimensions for the opened file from the binary data (not the metadata)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>A list of dictionaries containing Dimension / depth. If the shape is consistent across Scenes then
the list will have only one Dictionary. If the shape is inconsistent the the list will have a dictionary</p>
<blockquote>
<div><p>for each Scene. A consistently shaped file with 3 scenes, 7 time-points</p>
</div></blockquote>
<p>and 4 Z slices containing images of (h,w) = (325, 475) would return
[</p>
<blockquote>
<div><p>{‘S’: (0, 3), ‘T’: (0,7), ‘X’: (0, 475), ‘Y’: (0, 325), ‘Z’: (0, 4)}</p>
</div></blockquote>
<p>].
The result for a similarly shaped file but with different number of time-points per scene would yield
[</p>
<blockquote>
<div><p>{‘S’: (0, 1), ‘T’: (0,8), ‘X’: (0, 475), ‘Y’: (0, 325), ‘Z’: (0, 4)},
{‘S’: (1, 2), ‘T’: (0,6), ‘X’: (0, 475), ‘Y’: (0, 325), ‘Z’: (0, 4)},
{‘S’: (2, 3), ‘T’: (0,7), ‘X’: (0, 475), ‘Y’: (0, 325), ‘Z’: (0, 4)}</p>
</div></blockquote>
<p>]</p>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.is_mosaic">
<code class="sig-name descname">is_mosaic</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.is_mosaic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.is_mosaic" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if the loaded file is a mosaic file</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True | False ie is this a mosaic file</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.meta">
<em class="property">property </em><code class="sig-name descname">meta</code><a class="headerlink" href="#aicspylibczi.CziFile.meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract all metadata from czifile.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>metadata as an xml etree</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>lxml.etree</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.read_image">
<code class="sig-name descname">read_image</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.read_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.read_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the subblocks in the CZI file and for any subblocks that match all the constraints in kwargs return
that data. This allows you to select channels/scenes/time-points/Z-slices etc. Note if passed a BGR image
then the dims of the object will returned by this function and the implicit BGR channel will be expanded
into 3 channels. This shape differ from the values of dims(), size(), and dims_shape() as these are returning
the native shape without changing from BGR_3X to Gray_X.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – The keywords below allow you to specify the dimensions that you wish to match. If you
under-specify the constraints you can easily end up with a massive image stack.</p>
<blockquote>
<div><p>Z = 1   # The Z-dimension.
C = 2   # The C-dimension (“channel”).
T = 3   # The T-dimension (“time”).
R = 4   # The R-dimension (“rotation”).
S = 5   # The S-dimension (“scene”).
I = 6   # The I-dimension (“illumination”).
H = 7   # The H-dimension (“phase”).
V = 8   # The V-dimension (“view”).
M = 10  # The M_index, this is only valid for Mosaic files!</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tuple of (numpy.ndarray, a list of (Dimension, size)) the second element of the tuple is to make
sure the numpy.ndarray is interpretable. An example of the list is
[(‘S’, 1), (‘T’, 1), (‘C’, 2), (‘Z’, 25), (‘Y’, 1024), (‘X’, 1024)]
so if you probed the numpy.ndarray with .shape you would get (1, 1, 2, 25, 1024, 1024).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(numpy.ndarray, [Dimension, Size])</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.read_mosaic">
<code class="sig-name descname">read_mosaic</code><span class="sig-paren">(</span><em class="sig-param">region: Tuple = None</em>, <em class="sig-param">scale_factor: float = 1.0</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.read_mosaic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.read_mosaic" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a mosaic file and returns an image corresponding to the specified dimensions. If the file is more than
a 2D sheet of pixels, meaning only one channel, z-slice, time-index, etc then the kwargs must specify the
dimension with more than one possible value.</p>
<p><strong>Example:</strong> Read in the C=1 channel of a mosaic file at 1/10th the size</p>
<blockquote>
<div><p>czi = CziFile(filename)
img = czi.read_mosaic(scale_factor=0.1, C=1)</p>
</div></blockquote>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>region</strong> – A rectangle specifying the extraction box (x, y, width, height) specified in pixels</p></li>
<li><p><strong>scale_factor</strong> – The amount to scale the data by, 0.1 would mean an image 1/10 the height and width of native, if you
get distortions it seems to be due to a bug in Zeiss’s libCZI I’m trying to track it down but for now
if you use scale_factor=1.0 it should work properly.</p></li>
<li><p><strong>kwargs</strong> – The keywords below allow you to specify the dimension plane that constrains the 2D data. If the
constraints are underspecified the function will fail.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Z</span> <span class="o">=</span> <span class="mi">1</span>   <span class="c1"># The Z-dimension.</span>
<span class="n">C</span> <span class="o">=</span> <span class="mi">2</span>   <span class="c1"># The C-dimension (&quot;channel&quot;).</span>
<span class="n">T</span> <span class="o">=</span> <span class="mi">3</span>   <span class="c1"># The T-dimension (&quot;time&quot;).</span>
<span class="n">R</span> <span class="o">=</span> <span class="mi">4</span>   <span class="c1"># The R-dimension (&quot;rotation&quot;).</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">5</span>   <span class="c1"># The S-dimension (&quot;scene&quot;).</span>
<span class="n">I</span> <span class="o">=</span> <span class="mi">6</span>   <span class="c1"># The I-dimension (&quot;illumination&quot;).</span>
<span class="n">H</span> <span class="o">=</span> <span class="mi">7</span>   <span class="c1"># The H-dimension (&quot;phase&quot;).</span>
<span class="n">V</span> <span class="o">=</span> <span class="mi">8</span>   <span class="c1"># The V-dimension (&quot;view&quot;).</span>
</pre></div>
</div>
</li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(1, height, width)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.read_mosaic_size">
<code class="sig-name descname">read_mosaic_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.read_mosaic_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.read_mosaic_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the size of the entire mosaic image, if it’s not a mosaic image return (0, 0, -1, -1)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(x, y, w, h) the bounding box of the mosaic image</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(int, int, int, int)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.read_subblock_metadata">
<code class="sig-name descname">read_subblock_metadata</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.read_subblock_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.read_subblock_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the subblock specific metadata, ie time subblock was acquired / position at acquisition time etc.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – The keywords below allow you to specify the dimensions that you wish to match. If you
under-specify the constraints you can easily end up with a massive image stack.</p>
<blockquote>
<div><p>Z = 1   # The Z-dimension.
C = 2   # The C-dimension (“channel”).
T = 3   # The T-dimension (“time”).
R = 4   # The R-dimension (“rotation”).
S = 5   # The S-dimension (“scene”).
I = 6   # The I-dimension (“illumination”).
H = 7   # The H-dimension (“phase”).
V = 8   # The V-dimension (“view”).
M = 10  # The M_index, this is only valid for Mosaic files!</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an array of stings containing the specified subblock metadata</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.scene_bounding_box">
<code class="sig-name descname">scene_bounding_box</code><span class="sig-paren">(</span><em class="sig-param">index: int = -1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.scene_bounding_box"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.scene_bounding_box" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the bounding box of the raw collected data (pyramid 0) from the czifile. if not specified it defaults to
the first scene</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index</strong> – the scene index, omit and it defaults to the first one</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(x0, y0, w, h) for the specified scene</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.scene_height_by_width">
<code class="sig-name descname">scene_height_by_width</code><span class="sig-paren">(</span><em class="sig-param">index: int = -1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aicspylibczi/CziFile.html#CziFile.scene_height_by_width"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aicspylibczi.CziFile.scene_height_by_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the size of the scene (Y, X) / (height, width) for the specified Scene. The default is to return
the size of the first Scene but Zeiss allows scenes to be different sizes thought it is unlikely to encounter.
This module will warn you on instantiation if the scenes have inconsistent width and height.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index</strong> – specifies the index of the Scene to get the height and width of</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(height, width) tuple of the Specified scene.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.shape_is_consistent">
<em class="property">property </em><code class="sig-name descname">shape_is_consistent</code><a class="headerlink" href="#aicspylibczi.CziFile.shape_is_consistent" title="Permalink to this definition">¶</a></dt>
<dd><p>Query if the file shape is consistent across scenes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>true if consistent, false the scenes have different dimension shapes</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aicspylibczi.CziFile.size">
<em class="property">property </em><code class="sig-name descname">size</code><a class="headerlink" href="#aicspylibczi.CziFile.size" title="Permalink to this definition">¶</a></dt>
<dd><p>This returns the Size of each dimension in the dims string. So if S had valid indexes of [0, 1, 2, 3, 4]
the returned tuple would have a value of 5 in the same position as the S occurs in the dims string.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a tuple of dimension sizes. If the data has inconsistent shape the list will only contain -1 values and
the user needs to use dims_shape() to get the indexes.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Allen Institute for Cell Science

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>